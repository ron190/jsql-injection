<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UiUtil.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">view</a> &gt; <a href="index.source.html" class="el_package">com.jsql.view.swing.util</a> &gt; <span class="el_source">UiUtil.java</span></div><h1>UiUtil.java</h1><pre class="source lang-java linenums">/*******************************************************************************
 * Copyhacked (H) 2012-2025.
 * This program and the accompanying materials
 * are made available under no term at all, use it like
 * you want, but share and discuss it
 * every time possible with every body.
 * 
 * Contributors:
 *      ron190 at ymail dot com - initial implementation
 ******************************************************************************/
package com.jsql.view.swing.util;

import com.formdev.flatlaf.FlatLaf;
import com.formdev.flatlaf.intellijthemes.FlatLightFlatIJTheme;
import com.jsql.util.I18nUtil;
import com.jsql.util.LogLevelUtil;
import com.jsql.view.swing.console.JTextPaneAppender;
import com.jsql.view.swing.sql.SqlEngine;
import com.jsql.view.swing.text.action.DeleteNextCharAction;
import com.jsql.view.swing.text.action.DeletePrevCharAction;
import org.apache.commons.lang3.StringUtils;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;
import org.fife.ui.rsyntaxtextarea.RSyntaxTextArea;
import org.fife.ui.rsyntaxtextarea.Theme;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.Border;
import javax.swing.text.DefaultCaret;
import javax.swing.text.DefaultEditorKit;
import javax.swing.text.JTextComponent;
import javax.swing.text.StyleConstants;
import java.awt.*;
import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.lang.reflect.InvocationTargetException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import java.util.Objects;

/**
 * Build default component appearance, keyboard shortcuts and icons.
 */
public class UiUtil {
    
    /**
     * Log4j logger sent to view.
     */
<span class="fc" id="L52">    private static final Logger LOGGER = LogManager.getRootLogger();</span>

<span class="fc" id="L54">    public static final Border BORDER_5PX = BorderFactory.createEmptyBorder(5, 5, 5, 5);</span>
    public static final String TEXTPANE_FONT = &quot;TextPane.font&quot;;

<span class="fc" id="L57">    public static final ImageIcon ICON_FLAG_AR = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/ar.png&quot;)));</span>
<span class="fc" id="L58">    public static final ImageIcon ICON_FLAG_ZH = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/zh.png&quot;)));</span>
<span class="fc" id="L59">    public static final ImageIcon ICON_FLAG_RU = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/ru.png&quot;)));</span>
<span class="fc" id="L60">    public static final ImageIcon ICON_FLAG_TR = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/tr.png&quot;)));</span>
<span class="fc" id="L61">    public static final ImageIcon ICON_FLAG_EN = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/en.png&quot;)));</span>
<span class="fc" id="L62">    public static final ImageIcon ICON_FLAG_FR = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/fr.png&quot;)));</span>
<span class="fc" id="L63">    public static final ImageIcon ICON_FLAG_HI = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/hi.png&quot;)));</span>
<span class="fc" id="L64">    public static final ImageIcon ICON_FLAG_CS = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/cs.png&quot;)));</span>
<span class="fc" id="L65">    public static final ImageIcon ICON_FLAG_DE = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/de.png&quot;)));</span>
<span class="fc" id="L66">    public static final ImageIcon ICON_FLAG_NL = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/nl.png&quot;)));</span>
<span class="fc" id="L67">    public static final ImageIcon ICON_FLAG_IN = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/in.png&quot;)));</span>
<span class="fc" id="L68">    public static final ImageIcon ICON_FLAG_IT = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/it.png&quot;)));</span>
<span class="fc" id="L69">    public static final ImageIcon ICON_FLAG_ES = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/es.png&quot;)));</span>
<span class="fc" id="L70">    public static final ImageIcon ICON_FLAG_PT = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/pt.png&quot;)));</span>
<span class="fc" id="L71">    public static final ImageIcon ICON_FLAG_PL = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/pl.png&quot;)));</span>
<span class="fc" id="L72">    public static final ImageIcon ICON_FLAG_JA = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/ja.png&quot;)));</span>
<span class="fc" id="L73">    public static final ImageIcon ICON_FLAG_KO = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/ko.png&quot;)));</span>
<span class="fc" id="L74">    public static final ImageIcon ICON_FLAG_RO = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/ro.png&quot;)));</span>
<span class="fc" id="L75">    public static final ImageIcon ICON_FLAG_LK = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/lk.png&quot;)));</span>
<span class="fc" id="L76">    public static final ImageIcon ICON_FLAG_SE = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/se.png&quot;)));</span>
<span class="fc" id="L77">    public static final ImageIcon ICON_FLAG_FI = new ImageIcon(Objects.requireNonNull(UiUtil.class.getClassLoader().getResource(&quot;swing/images/flags/fi.png&quot;)));</span>

<span class="fc" id="L79">    public static final URL URL_ICON_16 = UiUtil.class.getClassLoader().getResource(&quot;swing/images/software/bug16.png&quot;);</span>
<span class="fc" id="L80">    public static final URL URL_ICON_32 = UiUtil.class.getClassLoader().getResource(&quot;swing/images/software/bug32.png&quot;);</span>
<span class="fc" id="L81">    public static final URL URL_ICON_96 = UiUtil.class.getClassLoader().getResource(&quot;swing/images/software/bug96.png&quot;);</span>
<span class="fc" id="L82">    public static final URL URL_ICON_128 = UiUtil.class.getClassLoader().getResource(&quot;swing/images/software/bug128.png&quot;);</span>

<span class="fc" id="L84">    public static final ModelSvgIcon DATABASE_BOLD = new ModelSvgIcon(&quot;database-bold&quot;, 0x1C274C)</span>
<span class="fc" id="L85">        .withTab(&quot;DATABASE_TAB&quot;, &quot;DATABASE_TOOLTIP&quot;);</span>
<span class="fc" id="L86">    public static final ModelSvgIcon ADMIN = new ModelSvgIcon(&quot;admin&quot;, 0.02f)</span>
<span class="fc" id="L87">        .withTab(&quot;ADMINPAGE_TAB&quot;, &quot;ADMINPAGE_TOOLTIP&quot;);</span>
<span class="fc" id="L88">    public static final ModelSvgIcon DOWNLOAD = new ModelSvgIcon(&quot;download&quot;, 0.55f)</span>
<span class="fc" id="L89">        .withTab(&quot;FILE_TAB&quot;, &quot;FILE_TOOLTIP&quot;);</span>
<span class="fc" id="L90">    public static final ModelSvgIcon TERMINAL = new ModelSvgIcon(&quot;terminal&quot;, 0.50f)</span>
<span class="fc" id="L91">        .withTab(&quot;EXPLOIT_TAB&quot;, &quot;EXPLOIT_TOOLTIP&quot;);</span>
<span class="fc" id="L92">    public static final ModelSvgIcon UPLOAD = new ModelSvgIcon(&quot;upload&quot;, 0.55f);</span>
<span class="fc" id="L93">    public static final ModelSvgIcon LOCK = new ModelSvgIcon(&quot;lock&quot;, 0.02f)</span>
<span class="fc" id="L94">        .withTab(&quot;BRUTEFORCE_TAB&quot;, &quot;BRUTEFORCE_TOOLTIP&quot;);</span>
<span class="fc" id="L95">    public static final ModelSvgIcon TEXTFIELD = new ModelSvgIcon(&quot;textfield&quot;, 0.02f)</span>
<span class="fc" id="L96">        .withTab(&quot;CODER_TAB&quot;, &quot;CODER_TOOLTIP&quot;);</span>
<span class="fc" id="L97">    public static final ModelSvgIcon BATCH = new ModelSvgIcon(&quot;batch&quot;, 0.02f)</span>
<span class="fc" id="L98">        .withTab(&quot;SCANLIST_TAB&quot;, &quot;SCANLIST_TOOLTIP&quot;);</span>

<span class="fc" id="L100">    public static final ModelSvgIcon TABLE_LINEAR = new ModelSvgIcon(&quot;table-linear&quot;, 0x212121);</span>
<span class="fc" id="L101">    public static final ModelSvgIcon TABLE_BOLD = new ModelSvgIcon(&quot;table-bold&quot;, 0x212121);</span>
<span class="fc" id="L102">    public static final ModelSvgIcon NETWORK = new ModelSvgIcon(&quot;network&quot;, 0.02f);</span>
<span class="fc" id="L103">    public static final ModelSvgIcon DATABASE_LINEAR = new ModelSvgIcon(&quot;database-linear&quot;, 0x1C274C);</span>
<span class="fc" id="L104">    public static final ModelSvgIcon CUP = new ModelSvgIcon(&quot;cup&quot;, 0.02f);</span>
<span class="fc" id="L105">    public static final ModelSvgIcon CONSOLE = new ModelSvgIcon(&quot;console&quot;, 0.02f);</span>
<span class="fc" id="L106">    public static final ModelSvgIcon BINARY = new ModelSvgIcon(&quot;binary&quot;, 0.02f);</span>
<span class="fc" id="L107">    public static final ModelSvgIcon CHUNK = new ModelSvgIcon(&quot;chunk&quot;, 0.02f);</span>
<span class="fc" id="L108">    public static final ModelSvgIcon COG = new ModelSvgIcon(&quot;cog&quot;, 0.02f);</span>

<span class="fc" id="L110">    public static final ModelSvgIcon CROSS_RED = new ModelSvgIcon(&quot;cross&quot;, new Color(0x0F0F0F), null, LogLevelUtil.COLOR_RED, 0.025f);</span>
    private static final String NAME_ARROW = &quot;arrow&quot;;
<span class="fc" id="L112">    public static final ModelSvgIcon ARROW = new ModelSvgIcon(UiUtil.NAME_ARROW, new Color(0x005a96), &quot;ComboBox.buttonArrowColor&quot;, 1f);</span>
<span class="fc" id="L113">    public static final ModelSvgIcon ARROW_HOVER = new ModelSvgIcon(UiUtil.NAME_ARROW, new Color(0x005a96), &quot;ComboBox.buttonHoverArrowColor&quot;, 1f);</span>
<span class="fc" id="L114">    public static final ModelSvgIcon ARROW_PRESSED = new ModelSvgIcon(UiUtil.NAME_ARROW, new Color(0x005a96), &quot;ComboBox.buttonPressedArrowColor&quot;, 1f);</span>
    private static final String NAME_EXPAND = &quot;expand&quot;;
<span class="fc" id="L116">    public static final ModelSvgIcon EXPAND = new ModelSvgIcon(UiUtil.NAME_EXPAND, Color.BLACK, &quot;ComboBox.buttonArrowColor&quot;, 0.02f);</span>
<span class="fc" id="L117">    public static final ModelSvgIcon EXPAND_HOVER = new ModelSvgIcon(UiUtil.NAME_EXPAND, Color.BLACK, &quot;ComboBox.buttonHoverArrowColor&quot;, 0.02f);</span>
<span class="fc" id="L118">    public static final ModelSvgIcon EXPAND_PRESSED = new ModelSvgIcon(UiUtil.NAME_EXPAND, Color.BLACK, &quot;ComboBox.buttonPressedArrowColor&quot;, 0.02f);</span>

<span class="fc" id="L120">    public static final ModelSvgIcon HOURGLASS = new ModelSvgIcon(&quot;hourglass&quot;, 0.02f);</span>
<span class="fc" id="L121">    public static final ModelSvgIcon ARROW_UP = new ModelSvgIcon(&quot;arrow-up&quot;, 0.02f);</span>
<span class="fc" id="L122">    public static final ModelSvgIcon ARROW_DOWN = new ModelSvgIcon(&quot;arrow-down&quot;, 0.02f);</span>
<span class="fc" id="L123">    public static final ModelSvgIcon SQUARE = new ModelSvgIcon(&quot;square&quot;, 0.01f);</span>
<span class="fc" id="L124">    public static final ModelSvgIcon TICK_GREEN = new ModelSvgIcon(&quot;tick&quot;, Color.BLACK, null, LogLevelUtil.COLOR_GREEN, 0.02f);</span>
<span class="fc" id="L125">    public static final ModelSvgIcon GLOBE = new ModelSvgIcon(&quot;globe&quot;, 0.025f);</span>
    private static final String PATH_APP_SVG = &quot;swing/images/software/app.svg&quot;;
<span class="fc" id="L127">    public static final ModelSvgIcon REPORT = new ModelSvgIcon(UiUtil.PATH_APP_SVG, 0.04f);</span>
<span class="fc" id="L128">    public static final ModelSvgIcon APP_RESULT = new ModelSvgIcon(UiUtil.PATH_APP_SVG, 0.5f);</span>
<span class="fc" id="L129">    public static final ModelSvgIcon APP_ABOUT = new ModelSvgIcon(UiUtil.PATH_APP_SVG, 0.25f);</span>

    public static final String PATH_PAUSE = &quot;swing/images/icons/pause.png&quot;;

    public static final String FONT_NAME_MONO_NON_ASIAN = &quot;Ubuntu Mono&quot;;
    public static final int FONT_SIZE_MONO_NON_ASIAN = 14;
    public static final String FONT_NAME_MONO_ASIAN = &quot;Monospace&quot;;
    public static final int FONT_SIZE_MONO_ASIAN = 13;
    
    // Used in Translation Dialog
    // HTML engine considers Monospaced/Monospace to be the same Font
    // Java engine recognizes only Monospaced
    public static final String FONT_NAME_MONOSPACED = &quot;Monospaced&quot;;
    public static final String TEXT_AREA_FONT = &quot;TextArea.font&quot;;
<span class="fc" id="L143">    public static final Font FONT_MONO_NON_ASIAN = new Font(</span>
        UiUtil.FONT_NAME_MONO_NON_ASIAN,
        Font.PLAIN,
<span class="fc" id="L146">        UIManager.getDefaults().getFont(UiUtil.TEXT_AREA_FONT).getSize() + 2</span>
    );
    
<span class="fc" id="L149">    public static final Font FONT_MONO_ASIAN = new Font(</span>
        UiUtil.FONT_NAME_MONO_ASIAN,
        Font.PLAIN,
<span class="fc" id="L152">        UIManager.getDefaults().getFont(UiUtil.TEXTPANE_FONT).getSize()</span>
    );
    
<span class="fc" id="L155">    public static final Font FONT_MONO_ASIAN_BIG = new Font(</span>
        UiUtil.FONT_NAME_MONO_ASIAN,
        Font.PLAIN,
<span class="fc" id="L158">        UIManager.getDefaults().getFont(UiUtil.TEXTPANE_FONT).getSize() + 2</span>
    );

<span class="fc" id="L161">    public static final Font FONT_NON_MONO = new Font(</span>
        &quot;Segoe UI&quot;,
        Font.PLAIN,
<span class="fc" id="L164">        UIManager.getDefaults().getFont(UiUtil.TEXTPANE_FONT).getSize()</span>
    );
    
<span class="fc" id="L167">    public static final Font FONT_NON_MONO_BIG = new Font(</span>
<span class="fc" id="L168">        UIManager.getDefaults().getFont(&quot;TextField.font&quot;).getName(),</span>
        Font.PLAIN,
<span class="fc" id="L170">        UIManager.getDefaults().getFont(&quot;TextField.font&quot;).getSize() + 2</span>
    );

    private UiUtil() {
        // Utility class
    }

    /**
     * Change the default style of various components.
     */
    public static void prepareGUI() {
<span class="fc" id="L181">        UiUtil.loadFonts();</span>
        // timer before closing automatically tooltip
<span class="fc" id="L183">        ToolTipManager.sharedInstance().setDismissDelay(3 * ToolTipManager.sharedInstance().getDismissDelay());</span>
<span class="fc" id="L184">        UIManager.put(UiUtil.TEXT_AREA_FONT, UiUtil.FONT_MONO_NON_ASIAN);  // required for basic text like chunks tab</span>
<span class="fc" id="L185">        UIManager.put(UiUtil.TEXTPANE_FONT, UIManager.getFont(UiUtil.TEXT_AREA_FONT));  // align textpane font</span>
<span class="fc" id="L186">    }</span>

    private static void loadFonts() {
<span class="fc" id="L189">        var graphicsEnvironment = GraphicsEnvironment.getLocalGraphicsEnvironment();</span>
<span class="fc" id="L190">        try (InputStream fontStream = new BufferedInputStream(</span>
<span class="fc" id="L191">            Objects.requireNonNull(UiUtil.class.getClassLoader().getResourceAsStream(&quot;swing/font/UbuntuMono-R-ctrlchar.ttf&quot;))</span>
        )) {
<span class="fc" id="L193">            var ubuntuFont = Font.createFont(Font.TRUETYPE_FONT, fontStream);</span>
<span class="fc" id="L194">            graphicsEnvironment.registerFont(ubuntuFont);</span>
<span class="nc" id="L195">        } catch (FontFormatException | IOException e) {</span>
<span class="nc" id="L196">            LOGGER.log(LogLevelUtil.CONSOLE_ERROR, &quot;Loading Font Ubuntu Mono with control characters failed&quot;, e);</span>
<span class="fc" id="L197">        }</span>
<span class="fc" id="L198">    }</span>

    /**
     * Icons for application window.
     * @return List of a 16x16 (default) and 32x32 icon (alt-tab, taskbar)
     */
    public static List&lt;Image&gt; getIcons() {
<span class="fc" id="L205">        List&lt;Image&gt; images = new ArrayList&lt;&gt;();</span>
        // Fix #2154: NoClassDefFoundError on read()
        try {
<span class="fc" id="L208">            images.add(ImageIO.read(Objects.requireNonNull(UiUtil.URL_ICON_128)));</span>
<span class="fc" id="L209">            images.add(ImageIO.read(Objects.requireNonNull(UiUtil.URL_ICON_96)));</span>
<span class="fc" id="L210">            images.add(ImageIO.read(Objects.requireNonNull(UiUtil.URL_ICON_32)));</span>
<span class="fc" id="L211">            images.add(ImageIO.read(Objects.requireNonNull(UiUtil.URL_ICON_16)));</span>
            
<span class="nc" id="L213">        } catch (NoClassDefFoundError | IOException e) {</span>
<span class="nc" id="L214">            LOGGER.log(LogLevelUtil.CONSOLE_JAVA, e, e);</span>
<span class="fc" id="L215">        }</span>
<span class="fc" id="L216">        return images;</span>
    }
    
    public static void drawPlaceholder(JTextComponent textComponent, Graphics g, String placeholderText) {
<span class="fc" id="L220">        UiUtil.drawPlaceholder(textComponent, g, placeholderText, 0, g.getFontMetrics().getAscent() + 2);</span>
<span class="fc" id="L221">    }</span>
    
    public static void drawPlaceholder(JTextComponent textComponent, Graphics g, String placeholderText, int x, int y) {
        
<span class="fc" id="L225">        int w = textComponent.getWidth();</span>
        
<span class="fc" id="L227">        ((Graphics2D) g).setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);</span>
        
<span class="fc" id="L229">        var ins = textComponent.getInsets();</span>
<span class="fc" id="L230">        var fm = g.getFontMetrics();</span>
        
<span class="fc" id="L232">        int c0 = textComponent.getBackground().getRGB();</span>
<span class="fc" id="L233">        int c1 = textComponent.getForeground().getRGB();</span>
<span class="fc" id="L234">        var m = 0xfefefefe;</span>
<span class="fc" id="L235">        int c2 = ((c0 &amp; m) &gt;&gt;&gt; 1) + ((c1 &amp; m) &gt;&gt;&gt; 1);</span>
        
<span class="fc" id="L237">        g.setColor(new Color(c2, true));</span>

<span class="fc bfc" id="L239" title="All 2 branches covered.">        var fontNonUbuntu = textComponent.getFont() == UiUtil.FONT_NON_MONO_BIG  // when address bar</span>
<span class="fc" id="L240">            ? UiUtil.FONT_MONO_ASIAN_BIG.deriveFont(Font.ITALIC)  // bigger font</span>
<span class="fc" id="L241">            : UiUtil.FONT_MONO_ASIAN.deriveFont(Font.ITALIC);  // fine for address bar, console, textfield</span>
<span class="fc" id="L242">        g.setFont(</span>
<span class="pc bpc" id="L243" title="1 of 2 branches missed.">            I18nViewUtil.isNonUbuntu(I18nUtil.getCurrentLocale())</span>
<span class="nc" id="L244">            ? fontNonUbuntu</span>
<span class="fc" id="L245">            : textComponent.getFont().deriveFont(Font.ITALIC)  // same</span>
        );

<span class="fc" id="L248">        g.drawString(</span>
            placeholderText,
            x +
<span class="pc bpc" id="L251" title="1 of 2 branches missed.">            (ComponentOrientation.RIGHT_TO_LEFT.equals(textComponent.getComponentOrientation())</span>
<span class="nc" id="L252">            ? w - (fm.stringWidth(placeholderText) + ins.left + 2)</span>
<span class="fc" id="L253">            : ins.left + 2),</span>
            y
        );
<span class="fc" id="L256">    }</span>
    
    public static void initialize(JTextComponent component) {
<span class="fc" id="L259">        component.setCaret(new DefaultCaret() {</span>
            @Override
            public void setSelectionVisible(boolean visible) {
<span class="fc" id="L262">                super.setSelectionVisible(true);</span>
<span class="fc" id="L263">            }</span>
        });
<span class="fc" id="L265">        component.getActionMap().put(DefaultEditorKit.deletePrevCharAction, new DeletePrevCharAction());</span>
<span class="fc" id="L266">        component.getActionMap().put(DefaultEditorKit.deleteNextCharAction, new DeleteNextCharAction());</span>
<span class="fc" id="L267">    }</span>

    public static void applyTheme(RSyntaxTextArea textarea) {
        try {
<span class="fc" id="L271">            boolean isDark = UIManager.getLookAndFeel().getName().matches(&quot;.*(Dark|High contrast).*&quot;);</span>
<span class="fc bfc" id="L272" title="All 2 branches covered.">            var xmlTheme = String.format(&quot;/org/fife/ui/rsyntaxtextarea/themes/%s.xml&quot;, isDark ? &quot;dark&quot; : &quot;default&quot;);</span>
<span class="fc" id="L273">            Theme theme = Theme.load(SqlEngine.class.getResourceAsStream(xmlTheme));</span>
<span class="fc" id="L274">            theme.apply(textarea);</span>
<span class="nc" id="L275">        } catch (IOException e) {</span>
<span class="nc" id="L276">            throw new IllegalArgumentException(e);</span>
<span class="fc" id="L277">        }</span>
<span class="fc" id="L278">    }</span>

    public static void applyTheme(String nameTheme) {
        try {
<span class="fc bfc" id="L282" title="All 2 branches covered.">            Class&lt;?&gt; c = Class.forName(StringUtils.isEmpty(nameTheme) ? FlatLightFlatIJTheme.class.getName() : nameTheme);</span>
<span class="fc" id="L283">            LookAndFeel lookAndFeel = (LookAndFeel) c.getDeclaredConstructor().newInstance();</span>
<span class="fc" id="L284">            UIManager.setLookAndFeel(lookAndFeel);</span>
<span class="nc" id="L285">        } catch (</span>
            ClassNotFoundException | NoSuchMethodException | InstantiationException | IllegalAccessException |
            InvocationTargetException | UnsupportedLookAndFeelException e
        ) {
<span class="nc" id="L289">            throw new IllegalArgumentException(e);</span>
<span class="fc" id="L290">        }</span>
<span class="fc" id="L291">        FlatLaf.updateUI();  // required</span>

        // required ATTRIBUTE_ALL without color for compatibility with dark/light mode as text is white/black
<span class="fc" id="L294">        StyleConstants.setForeground(JTextPaneAppender.ATTRIBUTE_WARN, LogLevelUtil.COLOR_RED);</span>
<span class="fc" id="L295">        StyleConstants.setForeground(JTextPaneAppender.ATTRIBUTE_INFORM, LogLevelUtil.COLOR_BLU);</span>
<span class="fc" id="L296">        StyleConstants.setForeground(JTextPaneAppender.ATTRIBUTE_SUCCESS, LogLevelUtil.COLOR_GREEN);</span>
<span class="fc" id="L297">    }</span>

    public static GridLayout getColumnLayout(int size) {
<span class="fc" id="L300">        return new GridLayout((size + 1) / 2, 2);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>